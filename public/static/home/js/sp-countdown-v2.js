+function(c){var d=function(a,b){this.$element=c(a);this.options=c.extend({},d.DEFAULTS,b);this.timeResult={d:"00",h:"00",m:"00",s:"00"};this.timer={};this.timer_tiny={};this.flag=false;this.Init()};d.DEFAULTS={type:"ss",timeParm:0,callbackFn:"",isAutoDestroy:true,watchTime:0,watchTimeCallBackFn:{},callbackFn_tiny:"",tinyTime:10};d.prototype.Init=function(){var b=this;if(b.options.type.toLowerCase()=="ms"){b.options.timeParm=b.options.timeParm/1000}b.stop();b.countDownDetail();var f=0,a=0;b.timer=window.setInterval(function(){f=new Date().getTime();if(b.$element.attr("data-time")){a=parseInt(b.$element.attr("data-time"))}if(f-a>=300){b.countDownDetail();b.$element.attr("data-time",f)}},1000)};d.prototype.reInit=function(b){var a=this;a.stop();a.options=c.extend({},a.options,b);a.flag=true;a.Init()};d.prototype.countDownDetail=function(){var b=this;try{var h=0;var a=b.options.timeParm;b._interCountDown(a)}catch(g){b.timeResult={msg:g};b.destory()}if(b.options.callbackFn&&typeof b.options.callbackFn=="function"){b.options.callbackFn(b.timeResult,b.$element,b)}if(b.options.timeParm>0&&b.options.timeParm<10){b.timer_tiny=setTimeout(function(){b.setMill()},100)}};d.prototype._interCountDown=function(b){var j=this;var k=parseInt(b);if(!isNaN(k)){if(j.watching()){if(j.options.watchTimeCallBackFn&&typeof j.options.watchTimeCallBackFn=="function"){j.options.watchTimeCallBackFn(j.timeResult,j.$element,j)}return}k--;j.options.timeParm=k;var l=0;var m=0;var n=0;var a=0;l=k%60;m=Math.floor(k%86400%3600/60);n=Math.floor(k%86400/3600);a=Math.floor(k/86400);l=this.toDouble(l);m=this.toDouble(m);n=this.toDouble(n);j.timeResult={d:a,h:n,m:m,s:l}}else{j.timeResult={msg:"not a number"};j.destory()}};d.prototype.toDouble=function(a){a=parseInt(a);return a<10?"0"+a:a.toString()};d.prototype.watching=function(){var a=this;if(parseInt(a.options.watchTime)<0){a.stop();if(a.options.isAutoDestroy){a.destory()}return true}else{if(parseInt(a.options.watchTime)==0){if(parseInt(a.options.timeParm)<=0){a.stop();if(a.options.isAutoDestroy){a.destory()}return true}}else{if(parseInt(a.options.watchTime)<=parseInt(a.options.timeParm)){a.stop();if(a.options.isAutoDestroy){a.destory()}return true}}}return false};d.prototype.stop=function(){var a=this;clearInterval(a.timer);clearTimeout(a.timer_tiny)};d.prototype.destory=function(){var a=this;if(a!=null&&a!=undefined){clearInterval(a.timer);clearTimeout(a.timer_tiny);this.$element.data("sp.spCountDown",null)}};d.prototype.setMill=function(){var a=this;a.options.tinyTime--;if(a.options.tinyTime<0){a.options.tinyTime=10}else{a.options.callbackFn_tiny(a.options.tinyTime,a.$element,a);a.timer_tiny=setTimeout(function(){a.setMill()},100)}};d.prototype.countDownTiny=function(){var a=this;if(a.options.callbackFn_tiny&&typeof a.options.callbackFn_tiny=="function"){a.options.tinyTime--;if(a.options.timeParm<=0){clearInterval(a.timer_tiny);a.options.tinyTime=9;return}else{if(a.options.tinyTime==-1){a.options.tinyTime=9}}if(a.watching()){a.options.tinyTime=0}a.options.callbackFn_tiny(a.options.tinyTime,a.$element,a)}};c.fn.spCountDown=function(a){return this.each(function(){var b=c(this);var f=b.data("sp.spCountDown");if(f==null||f==undefined){b.data("sp.spCountDown",(f=new d(this,a)))}else{f.reInit(a)}})}}(window.jQuery);