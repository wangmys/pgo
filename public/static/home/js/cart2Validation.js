function sendSaMessage(id,message){try{sa.openAPI.sendMessage(id,message)}catch(e){}}function checkAddrInfo(addrInfo){var result=true;var receiver=addrInfo.receiverName;result=!isEmpty(receiver)&&receiver.length>=2&&receiver.length<=20&&checkHYGName(receiver)&&checkName(receiver);if(!result){return false}var mobile=addrInfo.receiverMobile;result=!isEmpty(mobile)&&((mobile.indexOf("*")>=0)||checkMobile(mobile));if(!result){return false}var areaNum=addrInfo.receiverTelAreaCode;var recTel=addrInfo.receiverTel;var extNum=addrInfo.receiverTelExtNum;if(!isEmpty(areaNum)||!isEmpty(recTel)||!isEmpty(extNum)){result=/^\d{3,4}$/.test(areaNum)&&((recTel.indexOf("*")>=0)||(/^\d{7,8}$/.test(recTel)))&&((extNum.indexOf("*")>=0)||(/^\d{0,6}$/.test(extNum)))}if(!result){return false}var detail=addrInfo.detailAddress;result=!isEmpty(detail)&&(addrInfo.optType=="1"||checkIsValid(detail));if(!result){return false}if($("#overSeaFlag_ID").val()!="0"){var postalCode=addrInfo.postalCode;result=!isEmpty(postalCode)&&postalCode.length==6;if(!result){return false}}if($("#overSeaFlag_ID").val()=="1"||$("#footballProduct").val()=="true"){var cardId=addrInfo.idNumber;result=!isEmpty(cardId)&&((cardId.indexOf("*")>=0)||(isCardNo(cardId)&&checkBirthday(cardId)&&checkParity(cardId)));if(!result){return false}}result=!isEmpty(addrInfo.provinceName)&&!isEmpty(addrInfo.provinceCode)&&!isEmpty(addrInfo.cityName)&&!isEmpty(addrInfo.cityCode)&&!isEmpty(addrInfo.districtName)&&!isEmpty(addrInfo.districtCode)&&!isEmpty(addrInfo.townCode)&&!isEmpty(addrInfo.townName)&&!isEmpty(addrInfo.deliveryRegionCode)||(addrInfo.optType=="1"&&!isEmpty(addrInfo.selfTakeShopCode));if(!result){return false}return true}function valDlvReceiver(obj){var receiver=cloudCart2Common.getInputVal(obj);var errorTip="";if(isEmpty(receiver)){errorTip="收货人姓名不能为空"}else{if(receiver.length<2||receiver.length>20){errorTip="请输入2到20个字"}else{if(!checkHYGName(receiver)){errorTip="购买海外购商品需填写真实姓名"}else{if(!checkName(receiver)){errorTip="请输入正确的中文或者英文姓名"}}}}return showError(obj,errorTip)}function checkHYGName(receiver){var result=true;if($("#overSeaFlag_ID").val()==="2"||$("#overSeaFlag_ID").val()==="3"){if(!/^[\u4e00-\u9fa5]+$/.test(receiver)||haveIllegalWord(receiver)){result=false}}return result}function haveIllegalWord(Str){var illegalWords=new Array("先生","小姐","女士","顾客");var wordNum=illegalWords.length;for(var i=0;i<wordNum;i++){if(Str.indexOf(illegalWords[i])>=0){return true}}return false}function valDlvRecMobile(obj){var mobile=cloudCart2Common.getInputVal(obj);var errorTip="";if(isEmpty(mobile)){errorTip="手机号码不能为空"}else{if(needCheckMobile(mobile)&&!checkMobile(mobile)){errorTip="请输入以1开头的11位手机号码"}}return showError(obj,errorTip)}function needCheckMobile(mobile){var needCheck=true;if(addressUtil.isEditBox()){needCheck=(mobile.indexOf("*")<0)}return needCheck}function needCheckTele(recTel){var needCheck=true;if(addressUtil.isEditBox()){needCheck=((recTel.length!==7&&recTel.length!==8)||recTel.indexOf("*")<0)}return needCheck}function needCheckExtNum(extNum){var needCheck=true;if(addressUtil.isEditBox()){needCheck=(extNum.indexOf("*")<0)}return needCheck}function needCheckCardId(cardId){var needCheck=true;if(addressUtil.isEditBox()){needCheck=(cardId.indexOf("*")<0)}return needCheck}function valDlvRecTel(obj){var areaNum=cloudCart2Common.getInputVal(obj.find(".area-number"));var recTel=cloudCart2Common.getInputVal(obj.find(".tel-number"));var extNum=cloudCart2Common.getInputVal(obj.find(".ext-number"));var errorTip="";if(isEmpty(areaNum)&&isEmpty(recTel)&&isEmpty(extNum)){obj.find(".area-number").parents(".row").removeClass("error-row");obj.find(".area-number").parent().find(".tip-message").html("");return true}else{var o=obj.find(".area-number");if(!(/^\d{3,4}$/.test(areaNum))){errorTip="请输入3-4位固定电话区号"}else{if(needCheckTele(recTel)&&!(/^\d{7,8}$/.test(recTel))){errorTip="请输入7-8位固定电话";o=obj.find(".tel-number")}else{if(needCheckExtNum(extNum)&&!(/^\d{0,6}$/.test(extNum))){errorTip="请输入0-6位固定电话分机号";o=obj.find(".ext-number")}}}return showError(o,errorTip)}}function valDlvDetail(obj){var detail=cloudCart2Common.getInputVal(obj);var errorTip="";if(isEmpty(detail)){errorTip="详细地址不能为空"}else{if(!checkIsValid(detail)){errorTip="仅支持数字、汉字、英文字母（含大小写）、.（，,、-。·#_《》）() 及其组合"}}return showError(obj,errorTip)}function checkIsValid(f){var d=/([\u4e00-\u9fa5]|\w|[#-.]|[\uff0c\uff08\,\u3001\u3002\u00b7\_\u300a\u300b\uff09\(\)| ])+/;for(var e=0;e<f.length;e++){if(!d.test(f.charAt(e))){return false}}return true}function valDlvRegionInfo(obj){var errorTip="";var region=!addressUtil.isSelfPickUp()?regionInfo:regionInfo1;if(isEmpty(region)){errorTip="请选择所在省份"}else{var address=region.getAddress();if(isEmpty(address[0].name)){errorTip="请选择所在省份"}else{if(isEmpty(address[1].name)){errorTip="请选择所在城市"}else{if(isEmpty(address[2].name)){errorTip="请选择所在区县"}else{if(addressUtil.isSelfPickUp()){if($("#pickUp").find("li.selected").length===0){errorTip="请选择自提点"}}else{if(isEmpty(address[3].name)){errorTip="请选择所在乡镇街道"}}}}}}return showError(obj,errorTip)}function valPostalCode(obj){var postalCode=cloudCart2Common.getInputVal(obj);var errorTip="";if(isEmpty(postalCode)){return true}else{if(postalCode.length!=6){errorTip="请输入6位城市邮政编码"}}return showError(obj,errorTip)}function valCardId(obj){var cardId=cloudCart2Common.getInputVal(obj);var errorTip="";if(isEmpty(cardId)){errorTip="身份证号码不能为空"}else{if(needCheckCardId(cardId)&&(!isCardNo(cardId)||!checkBirthday(cardId)||!checkParity(cardId))){errorTip="身份证号码不正确"}}return showError(obj,errorTip)}function checkDelInfo(addressForm){return valDlvReceiver(addressForm.find(".user"))&&(($("#overSeaFlag_ID").val()!="1"&&$("#footballProduct").val()!="true")||valCardId(addressForm.find(".card-id")))&&valDlvRecMobile(addressForm.find(".mobile"))&&valDlvRecTel(addressForm)&&valDlvRegionInfo(addressForm.find(".citySelect"))&&(addressUtil.isSelfPickUp()||valDlvDetail(addressForm.find(".detial-address")))&&($("#overSeaFlag_ID").val()=="0"||valPostalCode(addressForm.find(".postalcode")))}function showError(obj,errorTip){sendSaMessage(obj.attr("id"),errorTip);if(obj.hasClass("card-id")){obj.siblings(".field-tip").remove()}if(isEmpty(errorTip)){obj.parents(".row").removeClass("error-row");obj.parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");return true}else{obj.parents(".row").addClass("error-row");obj.parent().find(".tip-message").html("<i class='tip-icon tip-error'></i>"+errorTip);return false}}function valPayName(){var payName=cloudCart2Common.getInputVal($("#payname"));var errorTip="";if(isEmpty(payName)){errorTip="请输入2-12位汉字"}else{if(!/^[\u4e00-\u9fa5]{2,12}$/.test(payName)){errorTip="请输入2-12位汉字"}else{if(haveIllegalWord(payName)){errorTip="请填写真实姓名"}}}if(!isEmpty(errorTip)){sendSaMessage("payname",errorTip);$("#payname").parent("dd").next("dd").removeClass("hide").find("em").html(errorTip);return false}else{sendSaMessage("payname","");$("#payname").parent("dd").next("dd").addClass("hide").find("em").html("");return true}}function valPayIdNum(){var payIdNum=cloudCart2Common.getInputVal($("#payidnum"));var errorTip="";if(isEmpty(payIdNum)){errorTip="身份证号码不正确"}else{if(!isCardNo(payIdNum)||!checkBirthday(payIdNum)||!checkParity(payIdNum)){errorTip="身份证号码不正确"}}if(!isEmpty(errorTip)){sendSaMessage("payidnum",errorTip);$("#payidnum").parent("dd").next("dd").removeClass("hide").find("em").html(errorTip);return false}else{sendSaMessage("payidnum","");$("#payidnum").parent("dd").next("dd").addClass("hide").find("em").html("");return true}}function clearTipMsg(obj){obj.parents(".row").removeClass("error-row");obj.parent().find(".tip-message").html("")}function isEmpty(str){var temp=$.trim(str);return(typeof temp==="undefine")||(temp==="")||(temp.length===0)}function maxChar(n,str){return str.length<n}function checkMobile(str){var reg=/^1\d{10}$/;return reg.test(str)}function checkName(str){var reg=/([\u4e00-\u9fa5]|[a-z]|[A-Z]|[0-9]|[\.\uff0c\uff08\,\u3001\-\u3002\u00b7\#\_\u300a\u300b\uff09\(\)| ])+/;for(var i=0;i<str.length;i++){if(!reg.test(str.charAt(i))){return false}}return true}function checkReserverName(str){var name=$.trim(str);if(name==0){return false}else{var nameReg=/^[\u4e00-\u9fa5a-zA-Z0-9]([\u4e00-\u9fa5a-zA-Z0-9]|\s){1,31}$/;return nameReg.test(name)}}function isCardNo(cardId){var reg=/(^\d{15}$)|(^\d{17}(\d|X|x)$)/;return reg.test(cardId)}function checkBirthday(cardId){var len=cardId.length;var cardReg;if(len===18){cardReg=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X|x)$/}else{if(len===15){cardReg=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/}else{return false}}var arr_data=cardId.match(cardReg);var year=(arr_data[2].length===2)?("19"+arr_data[2]):arr_data[2];var month=arr_data[3];var day=arr_data[4];return verifyDate(year,month,day)}function verifyDate(year,month,day){var birthday=new Date(year+"/"+month+"/"+day);var now=new Date();var now_year=now.getFullYear();if(birthday.getFullYear()==year&&(birthday.getMonth()+1)==month&&birthday.getDate()==day){var time=now_year-year;return(time>=3&&time<=100)}else{return false}}function checkParity(cardId){var len=cardId.length;if(len===18){var arrInt=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var arrCh=new Array("1","0","X","9","8","7","6","5","4","3","2");var cardTemp=0,i,valnum;for(i=0;i<17;i++){cardTemp+=cardId.substr(i,1)*arrInt[i]}valnum=arrCh[cardTemp%11];return(valnum==cardId.substr(17,1).toUpperCase())}return true}function validateCompanyName(){var companyname=cloudCart2Common.getInputVal($("#companyInvoiceTitle"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(companyname)){$("#companyInvoiceTitle").parents(".row").addClass("error-row");$("#companyInvoiceTitle").parent().find(".tip-message").html(icon+"公司名称不能为空");sendSaMessage("companyInvoiceTitle","公司名称不能为空");return false}else{if(companyname.length>60){$("#companyInvoiceTitle").parents(".row").addClass("error-row");$("#companyInvoiceTitle").parent().find(".tip-message").html(icon+"不能超过60个字符");sendSaMessage("companyInvoiceTitle","不能超过60个字符");return false}else{if(!checkCompanyName(companyname)){$("#companyInvoiceTitle").parents(".row").addClass("error-row");$("#companyInvoiceTitle").parent().find(".tip-message").html(icon+"请输公司名称字符");sendSaMessage("companyInvoiceTitle","请输公司名称字符");return false}else{$("#companyInvoiceTitle").parents(".row").removeClass("error-row");$("#companyInvoiceTitle").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceTitle","");return true}}}}function validateTaxNo(){var taxNo=cloudCart2Common.getInputVal($("#companyInvoiceTaxPayerNo"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(taxNo)){$("#companyInvoiceTaxPayerNo").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerNo").parent().find(".tip-message").html(icon+"纳税人识别号不能为空");sendSaMessage("companyInvoiceTaxPayerNo","纳税人识别号不能为空");return false}else{if(validateTaxNoLength(taxNo)){$("#companyInvoiceTaxPayerNo").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerNo").parent().find(".tip-message").html(icon+"税号长度必须为6到20位");sendSaMessage("companyInvoiceTaxPayerNo","税号长度必须为6到20位");return false}else{if(!isDigitOrLetter(taxNo)){$("#companyInvoiceTaxPayerNo").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerNo").parent().find(".tip-message").html(icon+"只能为数字或者字母");sendSaMessage("companyInvoiceTaxPayerNo","只能为数字或者字母");return false}else{$("#companyInvoiceTaxPayerNo").parents(".row").removeClass("error-row");$("#companyInvoiceTaxPayerNo").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceTaxPayerNo","");return true}}}}function validateTaxNoLength(taxNo){var flag=taxNo.length<6||taxNo.length>20;return flag}function validateRegAdd(){var regAdd=cloudCart2Common.getInputVal($("#companyInvoiceRegAddr"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(regAdd)){$("#companyInvoiceRegAddr").parents(".row").addClass("error-row");$("#companyInvoiceRegAddr").parent().find(".tip-message").html(icon+"注册地址不能为空");sendSaMessage("companyInvoiceRegAddr","注册地址不能为空");return false}else{if(regAdd.length>60){$("#companyInvoiceRegAddr").parents(".row").addClass("error-row");$("#companyInvoiceRegAddr").parent().find(".tip-message").html(icon+"不能超过60个汉字");sendSaMessage("companyInvoiceRegAddr","不能超过60个汉字");return false}else{if(!checkAddress(regAdd)){$("#companyInvoiceRegAddr").parents(".row").addClass("error-row");$("#companyInvoiceRegAddr").parent().find(".tip-message").html(icon+"注册地址不能包含非法字符");sendSaMessage("companyInvoiceRegAddr","注册地址不能包含非法字符");return false}else{$("#companyInvoiceRegAddr").parents(".row").removeClass("error-row");$("#companyInvoiceRegAddr").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceRegAddr","");return true}}}}function validateRegTel(){var quHao=cloudCart2Common.getInputVal($("#companyInvoiceQuhao"));var telephone=cloudCart2Common.getInputVal($("#companyInvoiceTelephone"));var fenJi=cloudCart2Common.getInputVal($("#companyInvoiceFenJi"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(quHao)){$("#companyInvoiceQuhao").parents(".row").addClass("error-row");$("#companyInvoiceQuhao").parent().find(".tip-message").html(icon+"区号不能为空");return false}else{if(!(/^\d{3,6}$/.test(quHao))){$("#companyInvoiceQuhao").parents(".row").addClass("error-row");$("#companyInvoiceQuhao").parent().find(".tip-message").html(icon+"区号必须是3-6位数字");return false}else{if(isEmpty(telephone)){$("#companyInvoiceQuhao").parents(".row").addClass("error-row");$("#companyInvoiceQuhao").parent().find(".tip-message").html(icon+"主机号码不能为空");return false}else{if(!(/^\d{5,10}$/.test(telephone))){$("#companyInvoiceQuhao").parents(".row").addClass("error-row");$("#companyInvoiceQuhao").parent().find(".tip-message").html(icon+"主机号码必须是5-10位数字");return false}else{if(!isEmpty(fenJi)&&!(/^\d{0,6}$/.test(fenJi))){$("#companyInvoiceQuhao").parents(".row").addClass("error-row");$("#companyInvoiceQuhao").parent().find(".tip-message").html(icon+"分机号必须是0-6位数字")}else{$("#companyInvoiceQuhao").parents(".row").removeClass("error-row");$("#companyInvoiceQuhao").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");return true}}}}}}function validateRegPhone(){var telephone=cloudCart2Common.getInputVal($("#companyInvoiceRegPhone"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(telephone)){$("#companyInvoiceRegPhone").parents(".row").addClass("error-row");$("#companyInvoiceRegPhone").parent().find(".tip-message").html(icon+"注册电话不能为空");sendSaMessage("companyInvoiceRegPhone","注册电话不能为空");return false}else{if(!(/^\d{7,12}$/.test(telephone))){$("#companyInvoiceRegPhone").parents(".row").addClass("error-row");$("#companyInvoiceRegPhone").parent().find(".tip-message").html(icon+"注册电话必须是7-12位数字");sendSaMessage("companyInvoiceRegPhone","注册电话必须是7-12位数字");return false}else{$("#companyInvoiceRegPhone").parents(".row").removeClass("error-row");$("#companyInvoiceRegPhone").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceRegPhone","");return true}}}function validateRegBank(){var regBank=cloudCart2Common.getInputVal($("#companyInvoiceAccntBank"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(regBank)){$("#companyInvoiceAccntBank").parents(".row").addClass("error-row");$("#companyInvoiceAccntBank").parent().find(".tip-message").html(icon+"开户银行不能为空");sendSaMessage("companyInvoiceAccntBank","开户银行不能为空");return false}else{if(regBank.length>30){$("#companyInvoiceAccntBank").parents(".row").addClass("error-row");$("#companyInvoiceAccntBank").parent().find(".tip-message").html(icon+"不能超过30个汉字");sendSaMessage("companyInvoiceAccntBank","不能超过30个汉字");return false}else{if(!checkAddress(regBank)){$("#companyInvoiceAccntBank").parents(".row").addClass("error-row");$("#companyInvoiceAccntBank").parent().find(".tip-message").html(icon+"开户银行不能包含非法字符");sendSaMessage("companyInvoiceAccntBank","开户银行不能包含非法字符");return false}else{$("#companyInvoiceAccntBank").parents(".row").removeClass("error-row");$("#companyInvoiceAccntBank").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceAccntBank","");return true}}}}function validateRegAccount(){var regAccount=cloudCart2Common.getInputVal($("#companyInvoiceBankAccntNum"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(regAccount)){$("#companyInvoiceBankAccntNum").parents(".row").addClass("error-row");$("#companyInvoiceBankAccntNum").parent().find(".tip-message").html(icon+"开户账号不能为空");sendSaMessage("companyInvoiceBankAccntNum","开户账号不能为空");return false}else{if(!(/^([\d]|[-]){1,30}$/.test(regAccount))){$("#companyInvoiceBankAccntNum").parents(".row").addClass("error-row");$("#companyInvoiceBankAccntNum").parent().find(".tip-message").html(icon+"开户账号只能为数字");sendSaMessage("companyInvoiceBankAccntNum","开户账号只能为数字");return false}else{if(regAccount.length>30){$("#companyInvoiceBankAccntNum").parents(".row").addClass("error-row");$("#companyInvoiceBankAccntNum").parent().find(".tip-message").html(icon+"不能超过30位");sendSaMessage("companyInvoiceBankAccntNum","不能超过30位");return false}else{$("#companyInvoiceBankAccntNum").parents(".row").removeClass("error-row");$("#companyInvoiceBankAccntNum").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceBankAccntNum","");return true}}}}function validateReceiverAdd(){var receiverAdd=cloudCart2Common.getInputVal($("#companyInvoiceTaxPayerAddr"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(receiverAdd)){$("#companyInvoiceTaxPayerAddr").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerAddr").parent().find(".tip-message").html(icon+"发票寄送地址不能为空");sendSaMessage("companyInvoiceTaxPayerAddr","发票寄送地址不能为空");return false}else{if(receiverAdd.length>60){$("#companyInvoiceTaxPayerAddr").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerAddr").parent().find(".tip-message").html(icon+"不能超过60个汉字");sendSaMessage("companyInvoiceTaxPayerAddr","不能超过60个汉字");return false}else{if(!checkAddress(receiverAdd)){$("#companyInvoiceTaxPayerAddr").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerAddr").parent().find(".tip-message").html(icon+"发票寄送地址不能包含非法字符");sendSaMessage("companyInvoiceTaxPayerAddr","发票寄送地址不能包含非法字符");return false}else{$("#companyInvoiceTaxPayerAddr").parents(".row").removeClass("error-row");$("#companyInvoiceTaxPayerAddr").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceTaxPayerAddr","");return true}}}}function validateReceiverName(){var receiverName=cloudCart2Common.getInputVal($("#companyInvoiceTaxPayerName"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(receiverName)){$("#companyInvoiceTaxPayerName").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerName").parent().find(".tip-message").html(icon+"发票收件人姓名不能为空");sendSaMessage("companyInvoiceTaxPayerName","发票收件人姓名不能为空");return false}else{if(receiverName.length<2||receiverName.length>32){$("#companyInvoiceTaxPayerName").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerName").parent().find(".tip-message").html(icon+"请输入2到32个字");sendSaMessage("companyInvoiceTaxPayerName","请输入2到32个字");return false}else{if(!checkReserverName(receiverName)){$("#companyInvoiceTaxPayerName").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerName").parent().find(".tip-message").html(icon+"请输入正确的中文或者英文姓名");sendSaMessage("companyInvoiceTaxPayerName","请输入正确的中文或者英文姓名");return false}else{$("#companyInvoiceTaxPayerName").parents(".row").removeClass("error-row");$("#companyInvoiceTaxPayerName").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceTaxPayerName","");return true}}}}function validateReceiverTel(){var cellphone=cloudCart2Common.getInputVal($("#companyInvoiceTaxPayerPhone"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(cellphone)){$("#companyInvoiceTaxPayerPhone").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerPhone").parent().find(".tip-message").html(icon+"收件人手机号不能为空");sendSaMessage("companyInvoiceTaxPayerPhone","收件人手机号不能为空");return false}else{if(cellphone.length>11){$("#companyInvoiceTaxPayerPhone").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerPhone").parent().find(".tip-message").html(icon+"不能超过11数字");sendSaMessage("companyInvoiceTaxPayerPhone","不能超过11数字");return false}else{if(!checkMobile(cellphone)){$("#companyInvoiceTaxPayerPhone").parents(".row").addClass("error-row");$("#companyInvoiceTaxPayerPhone").parent().find(".tip-message").html(icon+"收货人手机号必须是以1开头的11位数字");sendSaMessage("companyInvoiceTaxPayerPhone","收货人手机号必须是以1开头的11位数字");return false}else{$("#companyInvoiceTaxPayerPhone").parents(".row").removeClass("error-row");$("#companyInvoiceTaxPayerPhone").parent().find(".tip-message").html("<i class='tip-icon tip-ok'></i>");sendSaMessage("companyInvoiceTaxPayerPhone","");return true}}}}function valCommonInvoice(){var taxTitle=cloudCart2Common.getInputVal($(".voi-select").find("input"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(taxTitle)){$("#error-message").removeClass("hide").html(icon+"发票抬头不能为空");return false}if(taxTitle.length<2){$("#error-message").removeClass("hide").html(icon+"发票抬头不能少于2个字符");return false}if(limitChar(32,taxTitle)){$("#error-message").removeClass("hide").html(icon+"发票抬头不能超过30个字符");return false}if(!checkChineseEnglishBlak(taxTitle)){$("#error-message").removeClass("hide").html(icon+"发票抬头不能有非法字符");return false}else{$("#error-message").addClass("hide").html("");return true}}function valElectronInvoice(){var taxTitle=cloudCart2Common.getInputVal($("#eInvoiceId"));var icon='<i class="tip-icon tip-error-16"></i>';if(isEmpty(taxTitle)){$("#eInvoiceId").parents(".row").addClass("error-row");$("#eInvoiceId").parent().siblings(".tip-message").html(icon+"电子发票抬头不能为空");sendSaMessage("eInvoiceId","电子发票抬头不能为空");return false}if(taxTitle.length<2){$("#eInvoiceId").parents(".row").addClass("error-row");$("#eInvoiceId").parent().siblings(".tip-message").html(icon+"电子发票抬头不能少于2个字符");sendSaMessage("eInvoiceId","电子发票抬头不能少于2个字符");return false}if(limitChar(32,taxTitle)){$("#eInvoiceId").parents(".row").addClass("error-row");$("#eInvoiceId").parent().siblings(".tip-message").html(icon+"电子发票抬头不能超过32个字符");sendSaMessage("eInvoiceId","电子发票抬头不能超过32个字符");return false}if(!checkChineseEnglishBlak(taxTitle)){$("#eInvoiceId").parents(".row").addClass("error-row");$("#eInvoiceId").parent().siblings(".tip-message").html(icon+"电子发票抬头不能有非法字符");sendSaMessage("eInvoiceId","电子发票抬头不能有非法字符");return false}var invoiceProperty=$("#invoicePropertyId").val();if($.trim(invoiceProperty)=="01"&&$.trim(taxTitle)!="个人"){$("#eInvoiceId").parents(".row").addClass("error-row");$("#eInvoiceId").parent().siblings(".tip-message").html(icon+"个人发票可作为您的相关凭证，暂不支持更改发票信息");sendSaMessage("eInvoiceId","个人发票可作为您的相关凭证，暂不支持更改发票信息");return false}else{$("#eInvoiceId").parents(".row").removeClass("error-row");$("#eInvoiceId").parent().find(".tip-message").html("");sendSaMessage("eInvoiceId","");return true}}function limitChar(n,str){return str.length>n}function checkInvalidChar(str){var reg=/[·~`!@#$%^&{}\\<>\+\[\]　•〔〕『』«»【】〗〖›‹」「﹝﹞]+/;for(var i=0;i<str.length;i++){if(reg.test(str.charAt(i))){return false}}return true}function checkChineseEnglishBlak(str){var reg=/^[\u4e00-\u9fa5|\w|\.\uff0c\uff08\,\u3001\-\u3002\u00b7\#\_\u300a\u300b\uff09\(\)| ]{1,32}$/;return reg.test(str)}function checkAddress(str){var reg=/^[\u4e00-\u9fa5a-zA-Z0-9\#\-\-\（\）\(\)\、]+$/;return reg.test(str)}function checkchineseAndkuohao(str){var reg=/^[\u4e00-\u9fa5|()（）]*$/;return reg.test(str)}function checkCompanyName(str){var companyName=$.trim(str);var companyNameReg=/^([\u4e00-\u9fa5a-zA-Z0-9]|\·|\(|\（|\)|\）)([\u4e00-\u9fa5a-zA-Z0-9]|\·|\s|\(|\（|\)|\）){0,59}$/;return companyNameReg.test(companyName)}function isDigitOrLetter(str){var regLetter=/^[a-zA-Z0-9]+$/;return regLetter.test(str)}function isDigit3(str){var pattern2=/^[0-9]\d*$/;return pattern2.test(str)};