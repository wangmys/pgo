var dianqi=dianqi||{};var isIE=!!window.ActiveXObject;var isIE6=isIE&&!window.XMLHttpRequest;dianqi.ieVersion=function(c){var a=document.createElement("b");a.innerHTML="<!--[if IE "+c+"]><i></i><![endif]-->";return a.getElementsByTagName("i").length===1};(function(c,e,b){var a=b(c,e);c.util=c.util||{};c.util.toucher=c.util.toucher||a;c.define&&define(function(g,f,h){return a})})(this,document,function(g,j){function e(l,k){return l.className.match(new RegExp("(\\s|^)"+k+"(\\s|$)"))}function b(s,r,q){this._events=this._events||{};var n,p;if(typeof(r)=="string"){n=r.replace(/^\./,"");p=q}else{n=null;p=r}if(typeof(p)=="function"&&s&&s.length){var k=s.split(/\s+/);for(var l=0,o=k.length;l<o;l++){var m=k[l];if(!this._events[m]){this._events[m]=[]}this._events[m].push({className:n,fn:p})}}return this}function h(n,o){this._events=this._events||{};if(!this._events[n]){return}var k=this._events[n];var p=o.target;while(1){if(k.length==0){return}if(p==this.dom||!p){for(var m=0,r=k.length;m<r;m++){var l=k[m]["className"];var s=k[m]["fn"];if(l==null){f(n,s,p,o)}}return}var q=k;k=[];for(var m=0,r=q.length;m<r;m++){var l=q[m]["className"];var s=q[m]["fn"];if(e(p,l)){if(f(n,s,p,o)==false){return}}else{k.push(q[m])}}p=p.parentNode}}function f(l,m,p,o){var q=o.touches.length?o.touches[0]:{};var n={type:l,target:o.target,pageX:q.clientX||0,pageY:q.clientY||0};if(l=="swipe"&&o.startPosition){n.startX=o.startPosition.pageX,n.startY=o.startPosition.pageY,n.moveX=n.pageX-n.startX,n.moveY=n.pageY-n.startY}var k=m.call(p,n);if(k==false){o.preventDefault();o.stopPropagation()}return k}function i(l,k,n,m){return Math.abs(l-k)>=Math.abs(n-m)?(l-k>0?"Left":"Right"):(n-m>0?"Up":"Down")}function a(z){var s=this;var q=0;var k=0;var m,v,l,t;var r;var y;var x=false;var u=null;function n(A){x=false;clearTimeout(y);clearTimeout(r)}function o(A){u=A;m=A.touches[0].pageX;v=A.touches[0].pageY;l=0;t=0;x=true;q=new Date();h.call(s,"swipeStart",A);clearTimeout(y);y=setTimeout(function(){n(A);h.call(s,"longTap",A)},500)}function w(B){h.call(s,"swipeEnd",u);if(!x){return}var A=new Date();if(A-k>260){r=setTimeout(function(){n();h.call(s,"singleTap",u)},250)}else{clearTimeout(r);n(B);h.call(s,"doubleTap",u)}k=A}function p(B){u=B;B.startPosition={pageX:m,pageY:v};h.call(s,"swipe",B);if(!x){return}l=B.touches[0].pageX;t=B.touches[0].pageY;if(Math.abs(m-l)>2||Math.abs(v-t)>2){var A=i(m,l,v,t);h.call(s,"swipe"+A,B)}else{n(B);h.call(s,"singleTap",B)}n(B)}z.addEventListener("touchstart",o);z.addEventListener("MSPointerDown",o);z.addEventListener("pointerdown",o);z.addEventListener("touchend",w);z.addEventListener("MSPointerUp",w);z.addEventListener("pointerup",w);z.addEventListener("touchmove",p);z.addEventListener("MSPointerMove",p);z.addEventListener("pointermove",p);z.addEventListener("touchcancel",n);z.addEventListener("MSPointerCancel",n);z.addEventListener("pointercancel",n)}function c(k,l){var l=l||{};this.dom=k;a.call(this,this.dom)}c.prototype.on=b;return function(k){return new c(k)}});function readcookie(c){var b=document.cookie.split("; "),f="";for(var e=0;e<b.length;e++){var a=b[e].split("=");if(c==a[0]){f=unescape(a[1])}}return f}dianqi.Slide=function(a,b){this.opt=$.extend({event:"click",mouseOverDelay:0,auto:true,delay:5000,duration:500,showLabel:true,onchange:function(c){},onchangestart:function(c){},oninitend:function(c){}},b);this.container=$(a);this.items=this.container.find("li");this.index=0;this.pager=null;this.animating=false;this._init()};dianqi.Slide.prototype={_init:function(){var c=this;this.opt.showLabel&&this._createLabel();var a=this.container.attr("data-flag"),e,b=this.items.size();if(a==""){e=parseInt(Math.random()*b)}else{e=parseInt(a)}this.to(e);this.container.on("mouseenter mousemove",function(){c.mouseIn=true;c.autoPause()});this.container.on("mouseleave",function(){c.mouseIn=false;if(c.isInScreen()){c.autoStart()}});if(this.isInScreen()){c.autoStart();c.screen=true}$(window).scroll(function(){if(c.isInScreen()&&c.screen==false){c.screen=true;c.autoStart()}else{if(!c.isInScreen()&&c.screen==true){c.screen=false;c.autoPause()}}});this.opt.oninitend.call(this,this.container)},_createLabel:function(){var e=this,f=[],g,c,b;f.push('<div class="banner-nav">');for(c=1;c<=this.items.size();c++){f.push('<a href="javascript:;" class="page-item" name="dianqi_newhome_lbgg_yd0'+c+'"></a>')}f.push("</div>");this.pager=typeof this.opt.showLabel=="string"?this.container.find(this.opt.showLabel):$(f.join("")).appendTo(this.container.parent().find(".banner-nav-wrapper"));if(this.opt.mouseOverDelay){this.pager.find("a").hover(function(){var a=$(this).index();g=setTimeout(function(){e.to(a)},e.opt.mouseOverDelay)},function(){clearTimeout(g)})}else{this.pager.find("a").bind(this.opt.event,function(){e.to($(this).index())})}},autoStart:function(){var a=this;this.timer=setInterval(function(){a.next()},this.opt.delay)},autoPause:function(){clearInterval(this.timer)},prev:function(){this.to(this.index==0?this.items.size()-1:this.index-1)},next:function(){this.to(this.index==this.items.size()-1?0:this.index+1)},to:function(c){var g=this;if(this.animating){return false}this.opt.onchangestart.call(this,c);this.animating=true;this.items.stop().eq(c).fadeIn(this.opt.duration,function(){g.animating=false}).siblings().fadeOut(this.opt.duration);this.pager&&this.pager.find("a").eq(c).addClass("current").siblings().removeClass("current");var e=this.items.eq(c).attr("data-tlnumber"),f=this.items.eq(c).attr("tl-tag");if(e==""){var h=this.items.eq(c).find("img");var i=h.attr("src3");setTimeout(function(){h.attr("src",i).removeAttr("src3")},100)}else{if(e!=""&&!f){var b=readcookie("custno");$.ajax({cache:true,url:sn.smartDomain+"/iss/turingShelf/ajaxGetAdItem_"+e+"_1_"+b+"_tlBannerCallback.htm",type:"get",dataType:"jsonp",timeout:1000,jsonpCallback:"tlBannerCallback",success:function(m){var o=g.items.eq(c),q=m.shelfCode,l,k,j;if(m.success){l=m.turingAdShelfItemBo;o.css("background",l.color).find("a").attr({href:l.linkUrl,title:l.itemName}).end().find("img").attr({src:l.imgUrl,alt:l.itemName});o.attr("tl-tag","1");k=o.find("a").attr("name");j=k+":"+l.itemName;o.attr("expo",j);if(window.saExportUtil){saExportUtil.adverCarousel(j)}}else{o.attr("data-tlnumber","");var n=o.find("img"),p=n.attr("src3");n.attr("src",p).removeAttr("src3")}},error:function(){g.items.eq(c).attr("data-tlnumber","");var k=g.items.eq(c),j=k.find("img"),l=j.attr("src3");j.attr("src",l).removeAttr("src3")}})}else{if(f){var a=this.items.eq(c).attr("expo");if(window.saExportUtil){saExportUtil.adverCarousel(a)}}}}this.index=c;this.opt.onchange.call(this,c)},isInScreen:function(){var a=this.container;if(a.length>0){return($(window).scrollTop()+$(window).height()-100>a.offset().top)&&(a.offset().top+a.height()-100>$(window).scrollTop())}}};dianqi.banner=function(){var a=new dianqi.Slide(".banner",{mouseOverDelay:200,duration:500,delay:5000,oninitend:function(k){var j=k.find(".banner-nav a")}}),g=$(".banner-wrapper"),f=$(".left-point"),c=$(".right-point"),i=$(".banner-nav"),e=$(".banner li").size();if(e>1){g.hover(function(){f.show();c.show()},function(){f.hide();c.hide()});$(".banner-nav-wrap").show()}f.hover(function(){a.autoPause()},function(){a.autoStart()});c.hover(function(){a.autoPause()},function(){a.autoStart()});i.hover(function(){a.autoPause()},function(){a.autoStart()});f.click(function(){a.prev()});c.click(function(){a.next()});if(!(!!window.ActiveXObject||"ActiveXObject" in window)){var b=$(".banner");if(b.length>0){var h=util.toucher(b[0]);h.on("swipeLeft",function(){a.autoPause();a.autoStart();a.next()}).on("swipeRight",function(){a.autoPause();a.autoStart();a.prev()})}}};dianqi.hotTab=function(){var b=$(".category-tab .tab-list"),a=b.size(),e=parseInt(Math.random()*a),c=$(".hot-commodity-wrapper .hot-commodity"),f;b.eq(e).addClass("current-tab-list").siblings().removeClass("current-tab-list");c.eq(e).show().siblings().hide();$(".category-tab .tab-list").hover(function(){var h=$(this),g=h.index();f=setTimeout(function(){h.addClass("current-tab-list").siblings().removeClass("current-tab-list");c.eq(g).show().siblings().hide();lazyelem.detect()},300)},function(){clearTimeout(f)})};dianqi.topBanner=function(){$(".ng-top-banner .btn-close").on("click",function(){$(".top-active-wrap").hide();$(this).hide();$(".ng-top-banner .btn-open").show()});$(".ng-top-banner .btn-open").on("click",function(){$(".top-active-wrap").show();$(this).hide();$(".ng-top-banner .btn-close").show()})};dianqi.navShow=function(){var c=$(".sort-list li"),a=$(".second-item-list .category-item"),e=null,b;c.mouseenter(function(){var g=$(this),f=g.index();clearInterval(e);e=setTimeout(function(){g.addClass("current").siblings().removeClass("current");a.eq(f).show().siblings().hide()},200)});$(".dianqi-nav").mouseleave(function(){clearTimeout(e);e=setTimeout(function(){c.removeClass("current");a.hide()},60)});$(".item-close").on("click",function(){a.hide();c.removeClass("current")})};dianqi.navPosition=function(){$(".second-item-list .category-item").each(function(){var f=$(this),c=f.index(),a=f.height(),g,e=c*50+a+9,b=(c+1)*50-9;if(e<=400){g=c*50}else{if(b>=a){g=b-a}else{g=0}}f.css("top",g+"px")})};dianqi.floorSlide=function(a,b){this.opt=$.extend({event:"click",mouseOverDelay:0,auto:true,delay:5000,duration:500,showLabel:true,onchange:function(c){},onchangestart:function(c){},oninitend:function(c){}},b);this.container=a;this.items=this.container.find("li");this.index=0;this.pager=null;this.animating=false;this._init()};dianqi.floorSlide.prototype={_init:function(){var a=this;this.opt.showLabel&&this._createLabel();this.to(0);if(this.opt.auto){this.autoStart();this.container.hover(function(){a.autoPause()},function(){a.autoStart()})}this.opt.oninitend.call(this,this.container)},_createLabel:function(){var b=this,c=[],e,a;c.push('<div class="floor-nav">');for(a=1;a<=this.items.size();a++){c.push('<a href="javascript:;" class="page-item"></a>')}c.push("</div>");this.pager=typeof this.opt.showLabel=="string"?this.container.find(this.opt.showLabel):$(c.join("")).appendTo(this.container.find(".nav-wrap"));if(this.opt.mouseOverDelay){this.pager.find("a").hover(function(){var f=$(this).index();e=setTimeout(function(){b.to(f)},b.opt.mouseOverDelay)},function(){clearTimeout(e)})}else{this.pager.find("a").bind(this.opt.event,function(){b.to($(this).index())})}},autoStart:function(){var a=this;this.timer=setInterval(function(){a.next()},this.opt.delay)},autoPause:function(){clearInterval(this.timer)},prev:function(){this.to(this.index==0?this.items.size()-1:this.index-1)},next:function(){this.to(this.index==this.items.size()-1?0:this.index+1)},to:function(g){var i=this;if(this.animating){return false}this.opt.onchangestart.call(this,g);this.animating=true;var h=this.container.find("ul"),b=this.items.size(),j=(b-1)*230,c=-j,f;if(b===1){return}if(this.index===b-1&&g===0){this.items.eq(0).appendTo(h);h.css("left",c+230+"px").animate({left:c+"px"},300,function(){i.container.find("li").eq(b-1).prependTo(h);h.css("left","0");i.animating=false})}else{if(this.index===0&&g===b-1){this.items.eq(0).appendTo(h);h.css("left",c+"px").animate({left:c+230+"px"},300,function(){i.container.find("li").eq(b-1).prependTo(h);h.css("left",c+"px");i.animating=false})}else{c=-g*230;h.animate({left:c+"px"},300,function(){i.animating=false})}}this.pager&&this.pager.find("a").eq(g).addClass("current").siblings().removeClass("current");var e=this.items.eq(g).find("img");var a=e.attr("src3");e.attr("src",a).removeAttr("src3");this.index=g;this.opt.onchange.call(this,g)}};dianqi.floorBanner=function(g){var c=g.find(".g-slide");var i=new dianqi.floorSlide(c,{mouseOverDelay:200,duration:500,delay:5000,oninitend:function(l){var k=l.find(".banner-nav a")}});var b=c.find(".pre"),h=c.find(".next"),a=c.find(".nav-wrap"),j=c.find("li").size();if(j>1){c.hover(function(){b.stop(true,true).fadeIn(200);h.stop(true,true).fadeIn(200)},function(){b.stop(true,true).fadeOut(200);h.stop(true,true).fadeOut(200)});a.show()}b.click(function(){i.prev()});h.click(function(){i.next()});if(!(!!window.ActiveXObject||"ActiveXObject" in window)){var e=c;if(e.length>0){var f=util.toucher(e[0]);f.on("swipeLeft",function(){i.next()}).on("swipeRight",function(){i.prev()})}}};dianqi.select=function(e){var a=e.find(".g-choose .g-choose-btn"),b=e.find(".g-item"),c=e.find(".functions");a.each(function(){var h=$(this),i=h.parents(".dianqi-floor"),k="dianqi_newhome_",g=i.attr("id"),f=e.attr("data-keyword"),j="",m=0,l=0;k+=g+"_sx";h.on("click",function(){if(h.hasClass("checked")){h.removeClass("checked").parent().removeClass("current")}else{h.addClass("checked").parent().addClass("current").siblings().removeClass("current").find(".g-choose-btn").removeClass("checked")}var q,o,p=0,n=0;j="";b.find(".g-choose-btn").each(function(){var s=$(this);if(s.hasClass("checked")){j=s.parents(".g-choose").attr("data-chooseId")+":"+s.attr("data-chooseContent");m=s.parent().index()+1;n=1;p++}});c.find(".g-choose-btn").each(function(){var s=$(this);if(s.hasClass("checked")){if(n==1){j+=","}j+=s.parents(".g-choose").attr("data-chooseId")+":"+s.attr("data-chooseContent");l=s.parent().index()+1;p++}});if(p==0){i.find(".selected-commodity").hide();i.find(".selected-commodity ul").remove();i.find(".no-commodity").remove();return}q="0"+m;o="0"+l;var r="";dianqi.getCity(function(s){sn.cityId=s;$.ajax({cache:true,url:"http://search.suning.com/emall/mobile/electricSearch.jsonp?set=5&keyword="+f+"&st=0&cp=0&iv=-1&ci=&ct=-1&cf="+j+"&ps=10&cityId="+sn.cityId,type:"get",dataType:"jsonp",jsonpCallback:"success_jsonpCallback",success:function(u){var t=u.goods;i.find(".selected-commodity").show();if(t.length===0){r='<div class="no-commodity"><span class="lion"></span><p>该商品组合没有合适的商品推荐，<a href="http://search.suning.com/'+f+"/cityId="+sn.cityId+'" target="_blank" name="'+k+'tz">点击查看</a>更多商品</p></div>'}else{r="<ul>";$.each(t,function(x,y){var A=y.partnumber,v=y.catentdesc,B=sn.imgHost+"/b2c/catentries/000000000"+A+"_1_160x160.jpg",z=sn.productDomain+"/"+A+".html",w=k+q+o;if(x===9){w=w+"10"}else{x++;w=w+"0"+x}r+="<li data-sku= "+A+'|1||><a href="'+z+"?srcpoint="+w+'" target="_blank" name="'+w+'"><img src="'+B+'" alt="" width="160" height="160" /></a><div class="price-wrapper"><span class="now-price"></span><span class="last-price"></span></div><p class="commodity-name"><a href="'+z+"?srcpoint="+w+'" title="'+v+'" target="_blank" name="'+w+'">'+v+"</a></p></li>"});r+="</ul>"}i.find(".selected-commodity ul").remove();i.find(".no-commodity").remove();i.find(".selected-commodity").prepend(r);lazyelem.listen("li[data-sku]","fn",function(v){dianqi.priceDOM.push(v);if(dianqi.getPriceFlag){return}dianqi.getPrice(s)})}})})})});e.find(".selected-commodity .select-close").each(function(){var f=$(this);f.on("click",function(){f.parent().hide();var g=f.parents(".dianqi-floor");g.find(".g-choose-btn").removeClass("checked").parent().removeClass("current")})})};dianqi.selectBtn=function(g){var b=g.find(".area-item").find(".g-item"),a=b.find("li"),c,f,e=a.size();if(bigscreen){c=g.hasClass("tv-floor")?705:640}else{c=g.hasClass("tv-floor")?608:568}c=c-14*2-80*e;f=c/(e-1);b.css({marginLeft:14-f+"px",zoom:"1"});a.css("marginLeft",f+"px")};dianqi.floatBar=function(){var g={contents:null,align:"right",vertical:"middle",zIndex:7500,css:null,id:null,ieFixed:true};var i=($.browser.msie)?parseInt($.browser.version):false;if(arguments.length<1||!(arguments[0] instanceof Object)){return $.error("ECode.floatBar: 参数必须为JSON对象")}$.extend(g,arguments[0]);var b={position:"fixed",top:"-9999em",left:"-9999em"};if(i&&i<=6){b.position="absolute"}$('<div class="ECode-floatBar"></div>').css(b).appendTo("body");var j=$("body").find(".ECode-floatBar:last");j.append(g.contents);var f=j.width(),a=j.height(),h={zIndex:g.zIndex};var c=screen.width;if(g.id!=null){j.attr("id",g.id)}switch(g.align){case"right":h.left="50%";h.right=0;if(bigscreen){if(c>=1326){h.marginLeft="615px"}else{h.marginLeft="547px"}}else{if(c>=1126){h.marginLeft="515px"}else{h.marginLeft="447px"}}break;case"left":h.right="50%";h.left="auto";if(bigscreen){h.marginRight="605px"}else{h.marginRight="505px"}break;break;case"center":h.right="auto";h.left="50%";break}switch(g.vertical){case"top":h.top=0;break;case"bottom":h.top="auto";h.bottom=0;break;case"middle":h.top="50%";h.marginTop=-a/2;if(i&&i<=6){h.marginTop=0}break}j.css($.extend(h,g.css));var e=function(){var o=$(document).scrollTop(),k=$(window).height(),l=$(document).width();switch(g.vertical){case"top":j.stop().animate({top:o});break;case"bottom":var n=k+o-a;if(g.css.marginBottom!=null){var m=parseInt(g.css.marginBottom);if(m>=0){n-=m}}j.css({marginTop:0}).stop().animate({top:n});break;case"middle":j.stop().animate({top:k/2+o-a/2});break}};if(g.ieFixed&&i&&i<=6){e();$(window).scroll(function(){e()});$(window).resize(function(){e()})}};dianqi.floatBarFunc=function(){var b=$(".ECode-floatBar");if(b.length==0){return}function a(){var c=parseInt($(document).scrollTop());if(c>300){if(dianqi.ieVersion(6)){b.show()}else{b.slideDown()}}else{if(dianqi.ieVersion(6)){b.hide()}else{b.slideUp()}}}a();$(window).scroll(function(){a()}).resize(function(){a()})};dianqi.sideNav=function(){var b=$(".floor-nav"),a=$(".dianqi-floor");$(".float-bar li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});b.click(function(){var f=$(this),e=f.index(),c=a.eq(e).offset().top;isClickScroll=true;$("html, body").stop(true).animate({scrollTop:c},"fast",function(){setTimeout(function(){isClickScroll=false},500)})});$(".return").click(function(){isClickScroll=true;$("html, body").stop(true).animate({scrollTop:0},"fast",function(){setTimeout(function(){isClickScroll=false},500)})});$(window).scroll(function(){dianqi.floorScroll()})};dianqi.floorScroll=function(){var a=$(document).scrollTop(),b=$(window).height();$(".dianqi-floor").each(function(){var e=$(this),f=e.offset().top,c=e.index(".dianqi-floor");if(f>a-200&&f<a+b){$(".float-bar li").eq(c).addClass("on").siblings().removeClass("on");return false}})};dianqi.tab=function(){$(".list-tab li").on("click","a",function(){var c=$(this),a=c.parent(),b=a.index(),e=c.parents(".dianqi-floor").find(".tab-commodity");a.addClass("current").siblings().removeClass("current");e.eq(b).addClass("current-list").siblings().removeClass("current-list");lazyelem.detect()})};dianqi.brand=function(){$(".brands-list li").hover(function(){$(this).addClass("current")},function(){$(this).removeClass("current")})};dianqi.showCustomization=function(){var c=$(".customization"),b=$(".overlay-black");$(".show-list-img5").click(function(){c.show();b.show();a();lazyelem.detect();dianqi.getCity(function(e){sn.cityId=e;lazyelem.listen("li[data-sku]","fn",function(f){dianqi.priceDOM.push(f);if(dianqi.getPriceFlag){return}dianqi.getPrice(e)})})});if(isIE6){$(window).scroll(function(){a()})}$(window).resize(function(){a()});function a(){var g=$(document).scrollTop(),e=$(window).height(),f;if(!isIE6){f=(e-680)/2}else{f=(e-680)/2+g;b.css({top:g+"px",height:e+"px"})}c.css("top",f+"px")}};dianqi.customization=function(){var a=$(".J-huxing"),f=a.find("span"),c=a.find(".tab-fst"),e=a.find(".tab-sed"),b=$(".J-hx-recmds .recmds-list li");c.click(function(){var g=$(this);c.parent().removeClass("tab-item-on").end().removeClass("tab-fst-on");g.addClass("tab-fst-on");if(!isIE6){a.find(".tab-sed00, .tab-sed01, .tab-sed02").stop(true).animate({left:0,top:0,opacity:0},300)}if(g.attr("children")=="has"){g.parent().addClass("tab-item-on").end().siblings().removeClass("tab-sed-on").end().next().addClass("tab-sed-on");if(!isIE6){g.parent().find(".tab-sed00").stop(true).animate({left:"-38px",top:"-60px",opacity:1},300,function(){$(this).css("filter","none")}).end().find(".tab-sed01").stop(true).animate({left:"-70px",top:"-5px",opacity:1},300,function(){$(this).css("filter","none")}).end().find(".tab-sed02").stop(true).animate({left:"-38px",top:"48px",opacity:1},300,function(){$(this).css("filter","none")})}}if(g.attr("bg")!=""){$(g.attr("bg")).find("img[src3]").each(function(){$(this).attr("src",$(this).attr("src3")).removeAttr("src3")}).end().fadeIn().siblings().fadeOut()}});a.find("*[rel]").click(function(){var g=$(this);$(g.attr("rel")).show().find("img[src3]").each(function(){$(this).attr("src",$(this).attr("src3")).removeAttr("src3")}).end().siblings().hide();dianqi.getCity(function(h){sn.cityId=h;lazyelem.listen("li[data-sku]","fn",function(i){dianqi.priceDOM.push(i);if(dianqi.getPriceFlag){return}dianqi.getPrice(h)})})});e.click(function(){$(this).addClass("tab-sed-on").siblings().removeClass("tab-sed-on");dianqi.getCity(function(g){sn.cityId=g;lazyelem.listen("li[data-sku]","fn",function(h){dianqi.priceDOM.push(h);if(dianqi.getPriceFlag){return}dianqi.getPrice(g)})})});lazyelem.listen(".customization","fn",function(g){$(".tab-hall-box").click()});$(".customization .close-btn").click(function(){$(".customization").hide();$(".overlay-black").hide()})};dianqi.suitIpad=function(){if(sn.isApp){$(".banner-wrapper").find(".point").remove();$(".floor-slide").find(".pre").remove().end().find(".next").remove()}};dianqi.getCity=function(a){SFE.base.getCity(function(b){if(a&&$.isFunction(a)){a(b)}})};dianqi.baoguang=function(){if(typeof _analyseExpoTags=="function"){_analyseExpoTags("a")}else{setTimeout(dianqi.baoguang,2000)}};dianqi.downShiftFlag=false;dianqi.baseObj={id:"",name:"",trickPoint:"",vendorCode:"",partNumber:"",linkType:"1",shopPicUrl:"/b2c/catentries/000000000"};dianqi.data={data:[]};(function(){var b={};dianqi.tmpl=function a(f,e){var c=!/\W/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?c(e):c}})();dianqi.getUrl=function(h,e){var b="";if(h.trickPoint&&h.trickPoint.length>0){b="?srcPoint="+h.trickPoint}if(h.linkUrl&&h.linkUrl!=""){if(h.linkUrl.indexOf("http://")==0){return h.linkUrl+b}else{return"http://"+h.linkUrl+b}}else{var c=h.linkType;var a=h.vendorCode;var f=h.partNumber;var g=sn.productDomain;if(g.substring(g.length-1)!="/"){g=g+"/"}if(null!=e){if(a&&a.length>0){return g+a+"/"+f+".html?srcPoint="+e+"&src="+e}else{return g+f+".html?srcPoint="+e+"&src="+e}}else{if(a&&a.length>0){return g+a+"/"+f+".html"+b}else{return g+f+".html"+b}}}};dianqi.getPic=function(f){var c=sn.imgHost;if(c.substring(c.length-1)!="/"){c=c+"/"}if(f.picUrl&&f.picUrl!=""){return c+f.picUrl}else{var e=f.shopPicUrl;var a="1";var b="160x160";if(c){e=e.substring(1)}return c+e+f.partNumber+"_"+a+"_"+b+".jpg"}};dianqi.getSku=function(f){var c=f.partNumber+"|1|";var e="";var b=f.linkType;var a=f.vendorCode;if(b&&b!="1"){if(b=="2"){e="4|"}else{if(b=="3"){e="5|"}else{if(b=="4"){e="6|"}else{if(b=="5"){e="7|"}else{if(b=="6"){e="8|"}else{if(b=="7"){e="9|"}}}}}}}else{if(a&&a!=""){if(a=="0000000000"){e="3|"}else{e="2|"+f.vendorCode}}else{e="|"}}return'data-sku="'+c+e+'"'};dianqi.getId=function(f,c){var h="";var g="0000000000";var e=f.trickPoint;if(e&&""!=e){var b=e.indexOf("rec");var a="";if(-1!=b){a=e.substring(b)}if(f.vendorCode&&f.vendorCode.length>0){g=f.vendorCode}h="baoguang_"+a+"-"+c+"_"+g+"_"+f.partNumber+"_0"}return h};dianqi.getTrickForPic=function(g,f,a){var b="";var e=g.partnumber;if(!e){e=g.partNumber}if(e&&e.length>9){e=e.substring(9)}var c="c";if(a){c="p"}var h="0000000000";if(g.vendorCode&&g.vendorCode.length>0){h=g.vendorCode}b=g.trickPoint+"-"+f+"_"+c+"_"+h+"_"+e+"_0";return b};dianqi.getJsonObj=function(f,c,e){var i=dianqi.getTrickForPic(f,c,true);var a=dianqi.getUrl(f,i);var h=dianqi.getPic(f);var j=dianqi.getSku(f);var b=dianqi.getId(f,c);var g=dianqi.getTrickForPic(f,c,false);var k={id:b,name:f.name,href:a,trickPoint:f.trickPoint,trickPointT:g,trickPointP:i,pic:h,sku:j};return k};dianqi.load=function(){var e=dianqi.data.data;var c=dianqi.lazyLoadArr[0];var b="jsModel";var f=$(c).attr("jsModelId");if(c&&f&&f.length>0){b=$(c).attr("jsModelId")}if(e.length>0){var a=dianqi.tmpl(b,dianqi.data);$(c).html(a)}};dianqi.checkSmart=function(){$.ajax({url:sn.smartDomain+"/iss/turingShelf/ajaxIsNormalLevel_dianqi.lazyLoadSmart.html",async:false,cache:false,type:"GET",dataType:"jsonp",jsonp:dianqi.lazyLoadSmart,success:function(a){}})};dianqi.lazyLoadSmart=function(c,f){dianqi.downShiftFlag=c;var a=dianqi.lazyLoadArr[0];var g="";var i=sn.cityId;var j="";var k="";var e=$(a).attr("dataCode");var b=8;if(c=="h"){j=d("custno");k=d("_snma");if(k&&k.length>0){var h=k.split("_");if(h.legnth>2){k=h[1]}else{k=""}}else{k=""}}else{if(c=="l"){return false}}$.ajax({url:sn.smartDomain+"/iss/turingShelf/ajaxGetShelfItem_"+e+"_"+b+"_"+g+"_"+i+"_"+j+"_"+k+"_smartCb.html",cache:true,async:false,type:"GET",jsonp:false,jsonpCallback:"smartCb",dataType:"jsonp",error:function(l,n,m){},success:function(l){}})};var smartCb=function(c){var a=dianqi.lazyLoadArr[0];var b=$(a).attr("trickPoint");if(c&&c.success&&c.shelfInfo){var g=c.shelfInfo;var j=c.vendor;if(g.itemList&&g.itemList.length>0){var h=new Array();for(var e=0;e<g.itemList.length;e++){var l=g.itemList[e];var k=l.partnumber;if(k&&k.length>9){k=k.substring(9)}var f=e+1;if(e<9){f="0"+f}dianqi.baseObj.name=l.itemName;dianqi.baseObj.trickPoint=b;dianqi.baseObj.vendorCode=j;dianqi.baseObj.partNumber=k;h.push(dianqi.getJsonObj(dianqi.baseObj,e+1,true))}dianqi.data.data=h}}else{dianqi.data.data=[]}dianqi.lazyLoadCallBack()};dianqi.lazyLoadArr=new Array();dianqi.lazyLoadStatus=false;dianqi.lazyLoadCallBack=function(){dianqi.load();dianqi.getCity(function(a){sn.cityId=a;lazyelem.listen("li[data-sku]","fn",function(b){dianqi.priceDOM.push(b);if(dianqi.getPriceFlag){return}dianqi.getPrice(a)})});dianqi.lazyLoadArr.shift();if(dianqi.lazyLoadArr.length>0){dianqi.lazyLoadData(sn.cityId)}else{dianqi.lazyLoadStatus=false}};dianqi.lazyLoadData=function(a){if(dianqi.lazyLoadArr.length>0){if(dianqi.downShiftFlag){dianqi.lazyLoadSmart(dianqi.downShiftFlag,a);lazyelem.listen("li[data-sku]","fn",function(b){dianqi.priceDOM.push(b);if(dianqi.getPriceFlag){return}dianqi.getPrice(a)})}else{dianqi.checkSmart()}}};dianqi.lazyLoadInit=function(a,b){dianqi.lazyLoadArr.push(a);if(!dianqi.lazyLoadStatus){dianqi.lazyLoadStatus=true;dianqi.lazyLoadData(b)}};dianqi.priceDOM=new Array();dianqi.getPriceFlag=false;dianqi.getPrice=function(){dianqi.getPriceFlag=true;var a=dianqi.priceDOM[0];$.ajax({url:"http://"+sn.domain+sn.context+"/priceService_"+sn.cityId+"_"+a.attr("data-sku")+"_1_priceServiceCallBack_.html",dataType:"jsonp",jsonp:false,jsonpCallback:"priceServiceCallBack",timeout:3000,cache:true,error:function(b,e,c){},success:function(h){if(h&&h!=""&&h.price&&h.price.length>0){var k=h.price[0].promotionPrice.toString();if(k.indexOf(".")<=-1){k+=".00"}else{if(k.split(".")[1].length<2){k+="0"}}var f="";var j=h.price[0].refPrice;if(j){if(j.toString().indexOf(".")<=-1){j+=".00"}else{if(j.toString().split(".")[1].length<2){j+="0"}}f="<span class='last-price'><i>¥</i><em class='price-number'>"+j+"</em></span>"}$(a).find(".price-wrapper").html("<span class='now-price'><i>¥</i><em class='price-number'>"+k.split(".")[0]+".</em><em class='price-last'>"+k.split(".")[1]+"</em></span>"+f);if(j&&k){var l=(10/parseFloat(j/k)).toString(),g,e,b=l.length,i=l.indexOf(".");if(i<=-1){g=l;e=".0"}else{g=l.substring(0,i);e=l.substring(i,i+2)}$(a).find(".discount-wrapper").html('<div class="boom-tip discount-type"><p><span class="discount-number">'+g+"</span><span>"+e+"折</span></p></div>")}var c=h.price[0].promotionPrice.toString();if(c<=0){c=h.price[0].price.toString()}if(c.indexOf(".")<=-1){c+=".00"}else{if(c.toString().split(".")[1].length<2){c+="0"}}$(a).find(".price strong").html(c)}else{$(a).find(".discount-type").remove()}dianqi.priceDOM.shift();if(dianqi.priceDOM.length>0){dianqi.getPrice()}else{dianqi.getPriceFlag=false}}})};$(function(){lazyelem.listen();dianqi.topBanner();dianqi.banner();dianqi.hotTab();dianqi.navShow();dianqi.navPosition();dianqi.floatBar({zIndex:7099,contents:$("#dianqi_floatBar"),align:"left",vertical:"bottom",css:{marginBottom:80}});dianqi.floatBarFunc();dianqi.sideNav();dianqi.tab();dianqi.brand();dianqi.showCustomization();dianqi.suitIpad();lazyelem.listen(".lazy-floor","dom",function(c){var e=$(c).find("ul[jsModelId]");if(e&&e.length>0){dianqi.getCity(function(f){sn.cityId=f;dianqi.lazyLoadInit(e,f);lazyelem.listen("li[data-sku]","fn",function(g){dianqi.priceDOM.push(g);if(dianqi.getPriceFlag){return}dianqi.getPrice(f)})})}dianqi.getCity(function(f){sn.cityId=f;lazyelem.listen("li[data-sku]","fn",function(g){dianqi.priceDOM.push(g);if(dianqi.getPriceFlag){return}dianqi.getPrice(f);dianqi.baoguang()})});dianqi.floorBanner(c);dianqi.select(c);dianqi.selectBtn(c);dianqi.brand();dianqi.customization();dianqi.suitIpad()});dianqi.floorScroll();var a=$("#sideBarCode").find("a");var b=$("#sideBarFeedback").find("a");if(a.length>0){$("#sn-sidebar-change-code").html(a)}if(b.length>0){$("#sn-sidebar-change-feedback").html(b)}});