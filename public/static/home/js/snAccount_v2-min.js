var account=account||{};account.tabChange=function(a,b){var c=$(a).find("li");c.click(function(){var d=$(this).index();if(d==0){$("#title-h3").text("欢迎您登录苏宁易购会员")}else{$("#title-h3").text("欢迎您注册苏宁易购会员")}$(this).addClass("selected").siblings().removeClass("selected");$(b).eq(d).show().siblings(b).hide();$(".email-list").addClass("hide")})};account.changeTextBorder=function(){var b=$(".ui-text");b.bind("focus",function(){var e=$(this),d=e.parents("dl");e.addClass("ui-text-focus");e.parent("dd").addClass("dd-focus");if(d.hasClass("reg-user")){if(e.val()==""){d.addClass("hide-def-name")}}});$(".default-name").bind("click",function(){$(this).siblings("input").addClass("ui-text-focus").focus();$(this).parent("dd").addClass("dd-focus");$(this).addClass("popregister-color")});var a=$(".user-name").find(".ui-text");var c=$(".reg-user").find(".ui-text");if(a.val()!=""){$(".user-name .ui-text").parents("dl").addClass("hide-def-name")}if(c.val()!=""){$(".user-name .ui-text").parents("dl").addClass("hide-def-name")}a.bind("blur",function(){if($(this).val()==""){$(this).parent().parent().removeClass("hide-def-name")}});$(".acc-form").on("blur",".reg-user .ui-text",function(){var d=$(this);if(d.val()==""){d.parents(".reg-user").removeClass("hide-def-name")}});b.bind("blur",function(){$(this).removeClass("ui-text-focus");$(this).parent("dd").removeClass("dd-focus");$(this).siblings(".default-name").removeClass("popregister-color")});a.bind("keydown",function(){var d=$(".acc-form").find(".user-name");if($("this").val()!=""){d.addClass("hide-def-name")}else{d.removeClass("hide-def-name")}});$(".acc-form").on("click",".reg-user .default-name",function(){var d=$(this);if($("this").val()!=""){d.parents(".reg-user").addClass("hide-def-name")}else{d.parents(".reg-user").removeClass("hide-def-name")}})};account.iptWordsAct=function(b,d){var a=d.defaultValue,c=$(d).val();if(b=="focus"){if(c==a){$(d).val("").css("color","#333")}}if(b=="blur"){if(c==""){$(d).val(a).css("color","#999")}}};account.changeRegType=function(){var a=$(".reg-type");var b=a.find("input");b.each(function(){if(this.checked){var c=$(this).parent("span").index();var d=$(this).parents(".tab-cont").find(".acc-form");d.eq(c).show().siblings(".acc-form").hide()}});b.change(function(){var c=$(this).parent("span").index();var d=$(this).parents(".tab-cont").find(".acc-form");d.eq(c).show().siblings(".acc-form").hide()})};account.getCheck=function(){var d=$(".btn-get-code");var e;var a=1;var c=3;function b(){var k=$(this),j=k.siblings(".tip-box").find(".mail-sended"),g=k.text(),f=k.siblings(".tip-ok-wrap");if(a>3){c=-1;k.unbind("click",b);clearInterval(e);k.html("<span>重新发送验证码</span>");k.addClass("noActive");j.removeClass("hide");j.html('已发送验证码到邮箱，请<a href="#">登录邮箱</a>查收，您还有<em>2</em>次获取机会。');return false}j.removeClass("hide");f.removeClass("hide");k.addClass("noActive");k.html("<span>"+c+"秒后重新获取</span>");e=setInterval(function(){if(c>0){c--;k.html("<span>"+c+"秒后重新获取</span>");k.addClass("noActive");k.unbind("click",b)}else{c=3;clearInterval(e);k.html("<span>"+g+"</span>");k.removeClass("noActive");k.bind("click",b)}},1000);a++;return false}d.bind("click",b)};account.winAct=function(a,k){var e=!-[1,]&&!window.XMLHttpRequest,g=$("#"+a.id),c=$("#winWrapper"),i=c.find("#winBox"),j=c.find(".maskIfm"),d=a.isFix||true,h=g.html(),f=g.height()<=0?150:g.height();i.html(h);winActResize(d,g,c,e);if(j){j.css({height:f+"px"}).show()}if(a.isOpen){c.show()}else{c.hide()}if(k){k.apply(this,[a.id])}var b=$(".screen-iframe");a.isIframe?b.css({width:"100%",height:$(document).height()+"px",opacity:0.3,backgroundColor:"#000"}).show():b.css({width:0,height:0}).hide();window.onresize=function(){winActResize(d,g,c,e)}};var winActResize=function(f,i,a,g){var e=i.width(),k=i.height(),c=$(window).height(),b=$(document).width(),d=$(document).scrollTop(),h=k<=0?150:k,j=Math.max(0,(c-h)/2);a.css({top:j+"px",left:(b-e)/2});if(f){a.css({top:j+"px"});a.css("position",g?"absolute":"fixed");g&&$(window).scroll(function(){var l=Math.max(0,(c-h)/2);a.css({top:d+l,left:(b-e)/2})})}};account.autoFill=function(a,c){var f=!1,g=c,e=$(a),b=e.find(".ui-text"),d="";$(document).click(function(i){var h=$(i.target);if(h.hasClass("ui-text")){i.stopPropagation()}else{f&&f.hide()}});b[0]&&b.val()!=b[0].defaultValue&&b.val(b[0].defaultValue).css("color","#999");b.focus(function(){var j=$(this),i=j.val();f=j.siblings(".email-list");$.trim(j.val()).length&&j.change();var h=j.parents("dl").siblings("dl").find(".email-list");h&&h.hide()}).keyup(function(m){var j=$(this),p=m.keyCode,o=j.val(),n=f.find("li.hover"),k=f.find("li").size(),i=!1,h=!1,l={down:function(s,r){var q=n.index()>k-2;if(q){i=f.find("li").first();i.addClass("hover").siblings("li").removeClass("hover")}if(n.index()>=0){i=n.next();n.removeClass("hover").next().addClass("hover");d=i.html()}else{i=f.find("li").first();i.addClass("hover").siblings("li").removeClass("hover");n=i;d=i.html()}},up:function(r,q){if(n.index()>0){h=n.prev();n.removeClass("hover").prev().addClass("hover");d=h.html()}else{h=f.find("li").last();h.addClass("hover").siblings("li").removeClass("hover");d=h.html()}},enter:function(s,r){s.preventDefault();if(d.length){r.val(d)}var u=r.attr("id");var q=setTimeout(function(){f.hide();f.html("");r.focus();d="";clearTimeout(q)},1);return}};j.keydown();if(p==40){l.down(m,j)}else{if(p==38){l.up(m,j)}else{if(p==13){l.enter(m,j)}else{b.change()}}}}).keydown(function(j){if(j.keyCode==32){j.preventDefault();return}var i=$(this),h=i.val();if(h.length>25||h.length<1){f&&f.hide()&&f.html("");return}}).change(function(k){var j=$(this),p=j.val();if(p.length>25||p.length<1){return}if(/[\u4E00-\u9FA5]/i.test(p)){f.hide()&&f.html("");return}if(p.indexOf("@")<0){p+="@"}var o=p.substring(p.indexOf("@"),0),l=p.substring(p.indexOf("@")+1),i=["qq.com","163.com","126.com","sohu.com","sina.com","hotmail.com","gmail.com","foxmail.com","139.com","189.cn"],n=["qq.com","163.com","126.com","sohu.com","sina.com","hotmail.com","gmail.com","foxmail.com","139.com","189.cn","tom.com ","hotmail.com.cn","sina.cn","vip.qq.com","vip.sina.com","vip.163.com","wo.com.cn","21cn.com","yeah.net","netease.com"],h=new RegExp("^"+l);html="";if(g==2){if(j.val().indexOf("@")>0){html="<ol>"}}var m=p.split("@");if(m[1]==""){$.each(i,function(q,r){html+="<li title="+o+"@"+r+">"+o+"@"+r+"</li>\n"})}else{$.each(n,function(q,r){if(!h.test(r)){return}html+="<li title="+o+"@"+r+">"+o+"@"+r+"</li>\n"})}html+='</ol>\n<!--[if lt IE 7]><iframe frameborder="0" scrolling="0" src=""></iframe><![endif]-->\n';f.html(html).children("iframe").width(f.width()).height(f.height());f.removeClass("hide").show(0,function(){f.find("li").bind("mouseover mouseout mousedown",function(q){if(q.type=="mouseover"){$(this).addClass("hover").siblings("li").removeClass("hover")}if(q.type=="mousedown"){j.val(this.innerHTML);j.blur();f.hide();f.html("");var r=j.attr("id")}})});if(f.find("ol li").first().text()==p){f.hide()}if(f.find("ol li").first().text()==""){f.hide()}})};account.changeLoginTextBorder=function(){var a=$(".entry .text");var b=$(".login-name");if(b.val()!=""){$(this).parent().addClass("hide-label")}a.bind("focus",function(){$(this).hasClass("login-name")&&$(this).parent("dd").addClass("dd-focus");$(this).addClass("focus")});a.bind("blur",function(){$(this).removeClass("focus").parent("dd").removeClass("dd-focus");if($(this).val()==""){$(this).parent().removeClass("hide-label")}});a.bind("keydown",function(){if($("this").val()!=""){$(this).parent("dd").addClass("hide-label")}else{$(this).parent("dd").removeClass("hide-def-name")}})};account.regConverse=function(){$(".switch-to-mail a").on("click",function(){regSwitch(".J-to-mobile",".J-to-mail")});$(".switch-to-mobile a").on("click",function(){regSwitch(".J-to-mail",".J-to-mobile")})};$(document).ready(function(){account.changeTextBorder();account.changeLoginTextBorder();account.changeRegType();account.tabChange("#tabWrap",".tab-cont");account.autoFill("#normalReg_form .auto-person",2);account.autoFill(".reg-email .auto-email",2);account.regConverse();$(".msg-status").find(".get-no-msg , .tip-icon").on("mouseover",function(){$(this).siblings(".fixed-tip").removeClass("hide")});$(".msg-status").find(".get-no-msg , .tip-icon").on("mouseleave",function(){$(this).siblings(".fixed-tip").addClass("hide")})});function checkSlide(d,a){var c=$(d),b=$(a);c.css({opacity:1}).stop().animate({opacity:0,left:100},200,function(){b.css({top:0,opacity:0,left:100}).show().stop().animate({opacity:1,left:0},200);c.hide()})}function regSwitch(d,a){var c=$(d),b=$(a);$(".reg-switch-wrap").addClass("over-hide");c.css({left:324}).addClass("switch-move").show().stop().animate({left:-66},function(){c.removeClass("switch-move")});b.css({left:-66}).stop().animate({left:-456},function(){b.hide();$(".reg-switch-wrap").removeClass("over-hide")})};