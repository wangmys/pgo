var vipSn=vipSn||{};var isIE=!!window.ActiveXObject;var isIE6=isIE&&!window.XMLHttpRequest;vipSn.Slide=function(a,b){this.opt=$.extend({event:"click",mouseOverDelay:0,auto:true,delay:5000,duration:500,showLabel:true,onchange:function(c){},onchangestart:function(c){},oninitend:function(c){}},b);this.container=$(a);this.items=this.container.find(".main>li");this.index=0;this.pager=null;this.timer=null;this.animating=false;this._init()};vipSn.Slide.prototype={_init:function(){var a=this;this.opt.showLabel&&this._createLabel();this.to(0);if(this.opt.auto){this.autoStart();this.container.hover(function(){a.autoPause()},function(){a.autoStart()})}this.opt.oninitend.call(this,this.container)},_createLabel:function(){var b=this,c=[],d,a;c.push('<div class="vip-banner-pager"><ul class="pager">');for(a=1;a<=this.items.size();a++){c.push("<li></li>")}c.push("</ul></div>");this.pager=typeof this.opt.showLabel=="string"?this.container.find(this.opt.showLabel):$(c.join("")).appendTo(this.container);if(this.opt.mouseOverDelay){this.pager.find("li").hover(function(){var e=$(this).index();d=setTimeout(function(){b.to(e)},b.opt.mouseOverDelay)},function(){clearTimeout(d)})}else{this.pager.find("li").bind(this.opt.event,function(){b.to($(this).index())})}},autoStart:function(){var a=this;this.timer=setInterval(function(){a.next()},this.opt.delay)},autoPause:function(){clearInterval(this.timer)},prev:function(){this.to(this.index==0?this.items.size()-1:this.index-1)},next:function(){this.to(this.index==this.items.size()-1?0:this.index+1)},to:function(a){var b=this;if(this.animating){return false}this.opt.onchangestart.call(this,a);this.animating=true;this.items.stop().eq(a).fadeIn(this.opt.duration,function(){b.animating=false}).siblings().fadeOut(this.opt.duration);this.pager&&this.pager.find("li").eq(a).addClass("current").siblings().removeClass("current");this.items.eq(a).find("img[src3]").each(function(){var c=$(this);c.attr("src",c.attr("src3")).removeAttr("src3")});this.index=a;this.opt.onchange.call(this,a)}};vipSn.leftMenuSlider=function(){var e=$(".J-leftMenu"),g=e.find("li"),b=e.find(".slider"),h=true;var j=$(".go-top");function i(){var k=parseInt($(document).scrollTop());if(k>200){j.fadeIn()}}i();$(window).scroll(function(){i()});j.click(function(){h=false;$("html, body").stop(true).animate({scrollTop:0},"fast",function(){h=true});g.removeClass("on");b.hide()});function c(){g.each(function(){var m=$(this);if(m.hasClass("on")){h=false;var k=m.index(),l=k*41;b.animate({top:l},"fast",function(){b.show();h=true})}})}function d(){g.each(function(){var m=$(this);if(m.hasClass("on")){var l=m.find("a").attr("tar"),k=0;if($(l).length>0){if(isIE6){k=$(l).offset().top+"px"}else{k=$(l).offset().top-82+"px"}}if(k==0){return}$("html, body").stop(true).animate({scrollTop:k},"fast")}})}c();d();g.hover(function(){var k=$(this).index()*41;b.show().stop(true).animate({top:k},"fast")},function(){c()});g.click(function(){h=false;var m=$(this),l=m.find("a").attr("tar"),k=0;if($(l).length>0){if(isIE6){k=$(l).offset().top+"px"}else{k=$(l).offset().top-82+"px"}}m.addClass("on").siblings().removeClass("on");c();if(k==0){return}$("html, body").stop(true).animate({scrollTop:k},"fast",function(){h=true})});function a(k){var l=$("#floor_0"+k);if(l.length>0){if(isIE6){return l.offset().top-$(document).scrollTop()}else{return l.offset().top-$(document).scrollTop()-83}}else{return 0}}function f(){var k=g.length,o=$("#floor_01");if(o.length==0){return}if(a(1)<=0){for(var m=2;m<=k;m++){if(a(m)>0){g.eq(m-2).addClass("on").siblings().removeClass("on");var l=(m-2)*41;b.show().stop(true).css({top:l});return}}g.eq(k-1).addClass("on").siblings().removeClass("on");var n=(k-1)*41;b.show().stop(true).css({top:n})}else{g.removeClass("on");b.hide()}}$(window).scroll(function(){if(h){f()}})};vipSn.proSort=function(){var a=$(".product-list-hd .floor-sort li");a.click(function(){var b=$(this);b.addClass("on").siblings().removeClass("on").find(".arrow").removeClass("arrow-up arrow-down")});a.toggle(function(){$(this).find(".arrow").removeClass("arrow-up").addClass("arrow-down")},function(){$(this).find(".arrow").removeClass("arrow-down").addClass("arrow-up")})};vipSn.proHover=function(){var a=$(".product-list-box .pro-item");a.on("mouseenter","li",function(){$(this).find("img").stop(true).animate({right:"4px"},"200")});a.on("mouseleave","li",function(){$(this).find("img").stop(true).animate({right:"-16px"},"200")})};vipSn.topFixedNav=function(){if(isIE6){return}var c=$(".J-leftMenu"),e=$(".J-left-side"),a=$(".J-fixed-nav");if(c.length>0){var b=c.offset().top}function d(){var f=$(document).scrollTop();if($(".product-list").length>0){var g=$(".product-list").offset().top+$(".product-list").height();if(c.length>0){if(f+113>=b){a.show();if(e.hasClass("left-side-mt")){e.css({position:"fixed",top:103,zIndex:90})}else{e.css({position:"fixed",top:141,zIndex:90})}}if(f+e.height()+103>=g){a.show();e.css({position:"absolute",top:$(".product-list").height()-$(".second-wrapper .left-side").height()-54})}if(f<200){a.hide();e.css({position:"static",top:0})}}else{if(f>=200){a.show()}else{a.hide()}}}}d();$(window).scroll(function(){d()})};vipSn.movieBanner=function(){var a=new vipSn.Slide(".vip-banner",{mouseOverDelay:200,duration:500,delay:5000,oninitend:function(c){var b=c.find(".pager ul");b.css("margin-left",-b.outerWidth()/2)}})};vipSn.movieTab=function(){var d=$(".movie-video-tab .video-tab li"),b=$(".movie-video-box .video-box"),a=$(".movie-video-tab .slider"),c=0;d.click(function(){var g=$(this),e=g.index(),f=160*e+"px";b.eq(e).show().siblings().hide();a.stop(true).animate({top:f},200)})};vipSn.readAppDownload=function(){var a=$(".left-intro-hd .download-ewm");a.hover(function(){$(this).addClass("download-ewm-on")},function(){$(this).removeClass("download-ewm-on")})};vipSn.zhaoShangMenu=function(){var a=$(".left-menu-zhaoshang li");a.click(function(){$(this).addClass("on").siblings().removeClass("on")})};vipSn.inputValidate=function(){var e=$(".floor-range");var g=e.find(".rgwrapper");var c=e.find(".range");var f=e.find(".btn-range");e.click(function(){var h=$(this);h.find(".rgwrapper").addClass("range-hover");h.addClass("height88");h.find(".rgwrapper .range").addClass("focus1")});function b(h,i){if(h.keyCode==37|h.keyCode==39){return}i.value=i.value.replace(/[^\d.]/g,"");i.value=i.value.replace(/^\./g,"");i.value=i.value.replace(/\.{2,}/g,".");i.value=i.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".")}function a(h){h.value=h.value.replace(/\.$/g,"")}$(".range").keyup(function(h){b(h,this)});c.focus(function(){var h=$(this);h.val("");h.addClass("focus2")});c.blur(function(){var h=$(this);h.removeClass("focus2");a(this)});f.click(function(j){j.stopPropagation();var i=$(this);i.parents(".rgwrapper").removeClass("range-hover");i.parents(".floor-range").removeClass("height88");i.parents(".rgwrapper").find(".range").removeClass("focus1 focus2");i.parents(".floor-range").removeClass("on");var h=i.parents(".rgwrapper").find(".range");d(h)});e.mouseleave(function(){var i=$(this);i.find(".rgwrapper").removeClass("range-hover");i.removeClass("height88");i.find(".range").removeClass("focus1 focus2");var h=i.find(".range");d(h)});function d(j){j.each(function(){var k=$(this);if(k.val()==""){k.val("0")}if(k.val()=="云钻"){k.val("0")}});var i=parseFloat(j.eq(0).val());var h=parseFloat(j.eq(1).val());j.eq(0).val(i);j.eq(1).val(h);if(i>h){j.eq(0).val(h);j.eq(1).val(i)}if(j.eq(0).val()==0&&j.eq(1).val()==0){j.eq(0).val("云钻");j.eq(1).val("云钻")}}};vipSn.heightReset=function(){var b=$(".vip-earnmore").height()-4;var a=$(".product-list").height()-54;$(".fillbg").height(b);$(".filllayer .layer").height(a)};$(function(){vipSn.leftMenuSlider();vipSn.proSort();vipSn.proHover();vipSn.topFixedNav();vipSn.movieBanner();vipSn.movieTab();vipSn.readAppDownload();vipSn.zhaoShangMenu();vipSn.inputValidate();vipSn.heightReset()});