/**************************************************************
 *
 *    add_cart_comm.js?v20130721
 *    Author: 12061238
 *    Date : 2013-11-12
 *    modify 2014-12-15 添加大聚惠
 **************************************************************/
var envType="PRD";var domain_prd_reg=/^\w*?.suning.com$/;var domain_pre_reg=/^(\w*)(pre)(\w*)(.cnsuning.com)$/;var domain_sit_reg=/^(\w*)(sit)(\w*)(.cnsuning.com)$/;var domain_dev_reg=/^(\w*)(dev)(\w*)(.cnsuning.com)$/;var _hostName=document.location.hostname;if(domain_prd_reg.test(_hostName)){envType="PRD"}else{if(domain_pre_reg.test(_hostName)){envType="PRE"}else{if(domain_sit_reg.test(_hostName)){envType="SIT"}else{if(domain_dev_reg.test(_hostName)){envType="DEV"}}}}function getDomainForCCF(){var a="shopping.suning.com";if(envType=="PRE"){a="shoppingpre.cnsuning.com"}else{if(envType=="SIT"){a="shoppingsit.cnsuning.com"}else{if(envType=="DEV"){a="ccfdev.cnsuning.com"}}}return a}function addFavorateToCart(e,a,d,b,h,c,g){if(d!=undefined&&d!=""){var f="vendorCode="+d;$.ajax({url:"http://"+e+"/webapp/wcs/stores/servlet/SNGetVendorTypeCmd",data:f,dataType:"jsonp",crossDomain:true,success:function(i){if(i.vendorType==3||i.vendorType==4){addToCCF(a,d,i.vendorType,b,h,c,g)}else{addToCommerce(e,a,d,b,h,c,g)}}})}else{addToCommerce(e,a,d,b,h,c,g)}}function addToCCF(a,l,i,g,j,h,b){var k="01";var c="";if(h=="4"){k="02";c=b}var d="http://"+getDomainForCCF()+"/overSeaAddCart.do";var e={sourcePageType:"",activityType:k,activityId:c,cmmdtyCode:a,shopCode:l,cmmdtyQty:g,overSeasFlag:i==3?"927HWG1":"927HWG"};var f="";$.ajax({url:d,data:e,cache:false,async:false,dataType:"jsonp",crossDomain:true,success:function(n){var m=n.isSuccess;if(m=="Y"){f="C-000"}else{var o=n.addCartErrorList[0].errorCode;if(o!=undefined&&o!=""){f="C-"+o}else{f="C-001"}}j(f)},error:function(){f="C-001";j(f)}})}function addToCommerce(d,a,j,f,h,g,b){var i=false;var e="";var c={ERROEVIEW:"miniShoppingCartView",URL:"miniShoppingCartView",quantity_1:f,fullInventoryCheck:"0",inventoryCheckType:"0",fullVoucherCheck:"0",voucherCheckType:"0",inventoryRemoteCheck:"0",orderId:".",storeId:"10052",langId:"-7",catalogId:"10051",voucherRemoteCheck:"1",partnumber:a,supplierCode:j};if(g!=undefined&&g!=""){c.priceType=g}if(b!=undefined&&b!=""){c.promotionActiveId=b}$.ajax({url:"http://"+d+"/webapp/wcs/stores/servlet/addMiniSoppingCart",data:c,cache:false,async:false,dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackFun",success:function(k){var l="";if(k.isOverLimitCnt=="OVERLIMIT"){l="01"}else{if(k.errorCode=="NOTSALE"){l="02"}else{if(k.errorCode=="BLACKLISTERROR"){l="06"}else{if(k.errorCode=="GROUPTIMEOUT"){l="07"}else{if(k.errorCode=="GROUPNUMOUT"){l="08"}else{if(k.errorCode=="GROUPSIMPLENUMOUT"){l="09"}else{if(k.errorCode=="GROUPPARAMERROR"){l="10"}else{if(k.errorCode=="GROUPINPREHEAT"){l="11"}else{if(k.errorCode=="GROUPNOTBINDPHONE"){l="12"}else{if(k.errorCode=="GROUPNOTBRONDPAY"){l="13"}else{if(k.errorCode=="psellNotBuyTime"){l="14"}else{if(k.errorCode=="SCODE_NOT_BIND"){l="15"}else{if(k.errorCode=="SCODE_NOT_ENOUGH"){l="16"}else{if(k.errorCode=="SCODE_SYS_ERR"){l="17"}else{if(k.errorCode=="GROUPNOTBINDPHONE"){l="18"}else{if(k.errorCode=="GROUPUSERINFOERR"){l="19"}else{if(k.errorCode=="GROUPNOTBRONDPAY"){l="20"}else{if(k.hasInventor==1){l="00"}else{if(k.hasInventor==0&&(k.invErrFlow==1||k.invErrFlow==2)){l="03"}else{if(k.hasInventor==0&&k.invErrFlow==3){l="04"}else{l="05"}}}}}}}}}}}}}}}}}}}}h(l)}})};